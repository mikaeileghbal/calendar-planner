(()=>{"use strict";var e,t;function n(e){e.getFullYear(),t=(new Date).getDate();var n="<div class='month-container'>";return n+="<table id='calendar_table' class='calendar_table'>",n+=function(e){var t=e.getMonth(),n=e.getFullYear();return'<caption id="'.concat(a(t),'">')+a(t)+" <span class='year' id='year'>"+n+"</span></caption>"}(e),n+=function(){for(var e=["S","M","T","W","T","F","S"],t="<tr>",n=0;n<e.length;n++)t+="<th class='calendar-weakdays'>"+e[n]+"</th>";return t+"</tr>"}(),n+=function(e){for(var t=0,n=new Date(e.getFullYear(),e.getMonth(),1),a=n.getDay(),o="<tr>",r=0;r<a;r++)o+="<td class='empty'><div class='empty-day'></div></td>";for(var c=function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31],n=e.getFullYear(),a=e.getMonth();return n%4==0&&(n%100==0&&n%400!=0||(t[1]=29)),t[a]}(e),i=(new Date).getDate(),l=(new Date).getMonth(),s="",d="",u=1;u<=c;u++)n.setDate(u),a=n.getDay(),t="".concat(n.getFullYear()).concat(2===n.getMonth().toString().length?n.getMonth():"0"+n.getMonth()).concat(2===n.getDate().toString().length?n.getDate():"0"+n.getDate()),s=6===a?"sat":"",d=5===a?"fri":"",u===i&&e.getMonth()===l?o+="<td  class='calendar-dates ".concat(s," ").concat(d,"' id='calendar-today'><div data-daynumber=").concat(t," class='days'>")+u+"</div></td>":o+="<td  class='calendar-dates ".concat(s," ").concat(d,"'><div data-daynumber=").concat(t," class='days'>")+u+"</div></td>",6===a&&(o+="</tr>"),t++;for(var h=(a=(n=new Date(e.getFullYear(),e.getMonth(),c)).getDay())+1;h<7;h++)o+="<td class='empty'><div class='empty-day'></div></td>";return o+"</tr>"}(e),(n+="</table>")+"</div>"}function a(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var i=new WeakMap,l=new WeakMap;const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,i,{writable:!0,value:""}),r(this,l,{writable:!0,value:""}),this.state="EDIT",this.container=document.createElement("div"),this.input=document.createElement("input"),this.btnAdd=document.createElement("button"),this.btnDelete=document.createElement("button"),this.trash=document.createElement("i"),this.btnAdd.classList.add("todo__add","button"),this.container.classList.add("todo__row"),this.btnDelete.classList.add("button","btnDeleteItem"),this.trash.classList.add("fa","fa-trash"),this.input.placeholder="Note...",this.btnDelete.appendChild(this.trash),this.container.appendChild(this.input),this.container.appendChild(this.btnAdd),this.container.appendChild(this.btnDelete)}var t,n;return t=e,(n=[{key:"setState",value:function(){"NOEDIT"===this.state?(this.input.setAttribute("disabled","true"),this.btnAdd.style.display="none",this.btnDelete.style.display="block"):"EDIT"===this.state&&(this.input.removeAttribute("disabled"),this.btnAdd.style.display="block",this.btnDelete.style.display="none",this.input.focus())}},{key:"createNote",value:function(){var e=this;return this.input.textContent=function(e,t){return t.get?t.get.call(e):t.value}(this,c(this,l,"get")),this.btnAdd.textContent="Done",this.btnDelete.style.display="none",this.btnAdd.addEventListener("click",(function(t){t.stopPropagation(),console.log("Done"),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,c(e,t,"set"),n)}(e,l,e.input.value),e.state="NOEDIT",e.setState()})),this.btnDelete.addEventListener("click",(function(t){t.stopPropagation(),e.container.parentElement.removeChild(e.container)})),this.container.addEventListener("click",(function(t){e.state="EDIT",e.setState(),e.input.focus()})),this.container}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=u;function u(e,t,n){this.document=e,this.controller=t,this.model=n;var a=this,o=this.document.getElementById("btnToday"),r=this.document.getElementById("btnNextYear"),c=this.document.getElementById("btnPreviousYear");o.addEventListener("click",(function(){a.controller.today()})),r.addEventListener("click",(function(){a.controller.nextYear()})),c.addEventListener("click",(function(){a.controller.previousYear()}))}u.prototype.renderWeekCalendar=function(e){this.document.createElement("div").textContent=e.Week};const h=y;function y(e){this.year=new Date(e,0,1)}y.prototype.setYear=function(e){this.year=new Date(e,0,1)},y.prototype.getToday=function(){return console.log("year:",this.year),this.year.getDate()},y.prototype.getWeekCalendar=function(){return{Week:"week"}},y.prototype.getMonthCalenar=function(){for(var e=this.year,t=0,n=new Date(e.getFullYear(),e.getMonth(),1),a=n.getDay(),o=[],r=0;r<a;r++)o.push("e");for(var c=daysInMonth(e),i=(new Date).getDate(),l=(new Date).getMonth(),s="",d="",u=1;u<=c;u++)n.setDate(u),a=n.getDay(),t="".concat(n.getFullYear()).concat(2===n.getMonth().toString().length?n.getMonth():"0"+n.getMonth()).concat(2===n.getDate().toString().length?n.getDate():"0"+n.getDate()),s=6===a?"sat":"",d=5===a?"fri":"",u===i&&e.getMonth()===l?o+="<td  class='calendar-dates ".concat(s," ").concat(d,"' id='calendar-today'><div data-daynumber=").concat(t," class='days'>")+u+"</div></td>":o+="<td  class='calendar-dates ".concat(s," ").concat(d,"'><div data-daynumber=").concat(t," class='days'>")+u+"</div></td>",6===a&&(o+="</tr>"),t++;for(var h=(a=(n=new Date(e.getFullYear(),e.getMonth(),c)).getDay())+1;h<7;h++)o+="<td class='empty'><div class='empty-day'></div></td>";return o+"</tr>"},y.prototype.getYearCalendar=function(){return{Year:"year"}};const g=v;function v(e){this.document=e,this.view=null}v.prototype.createCalendar=function(e){this.view=new d(this.document,this,new h(e))},v.prototype.setViewMonth=function(){this.view.renderWeekCalendar(this.view.model.getWeekCalendar())},v.prototype.today=function(){console.log("Today")},v.prototype.nextYear=function(){console.log("next year")},v.prototype.previousYear=function(){console.log("Previous year")};var m=new g(document);m.createCalendar("2020"),m.setViewMonth();var f=document.getElementById("calendar"),p=document.querySelector("#btnToday"),b=document.querySelector("#btnPreviousYear"),D=document.querySelector("#btnNextYear"),w=document.querySelector("#btnCloseSidePanel"),E=document.querySelector(".side-panel"),k=document.querySelector("#btnOpenNotes"),S=document.querySelectorAll(".todo__label"),L=document.querySelector("#btnAddItem"),M=document.querySelector("#btnCancel"),Y=document.querySelector(".todo__container"),C=document.querySelector("#view"),q=document.querySelector(".button--add"),T=(document.querySelector(".add-item__countainer"),"Year"),_=0;console.log(L),console.log(M),console.log(Y),console.log(S);var A=localStorage.getItem("currentYear")||(new Date).getFullYear(),F=new Date(A);F.setDate((new Date).getDate()),F.setMonth((new Date).getMonth()),console.log(F);var I=document.querySelector(".time");function N(){P(document.querySelectorAll(".days"))}function x(){e=f,function(a){a.getFullYear(),t=(new Date).getDate();for(var o="<div class='year-container'>",r=0;r<12;r++)o+=n(new Date(a.getFullYear(),r,1));e.innerHTML=o+"</div>"}(F),B(),P(document.querySelectorAll(".days"))}function W(){f.innerHTML=n(new Date(A,_,1)),B()}function P(e){e.forEach((function(t){t.addEventListener("click",(function(n){e.forEach((function(e){e.classList.remove("selected")})),t.classList.add("selected");var a=n.target.dataset.daynumber,o=new Date(a.slice(0,4),a.slice(4,6),a.slice(6,8));_=a.slice(4,6),console.log(_),console.log(o),document.querySelector(".side-panel_date").innerText=o.toDateString()}))}))}function O(){var e;"Year"===T?(e=A,F.setFullYear(e),function(e){localStorage.setItem("currentYear",e)}(A),x()):"Month"===T&&(console.log(_),W());var t=document.querySelectorAll(".days");console.log("dates:",t),P(t)}function B(){document.querySelector(".current-year");var e=document.querySelector(".today");"Year"===T||"Month"===T&&console.log(Number(_)),e.innerText=t}setInterval((function(){I.innerText=(new Date).toLocaleTimeString()}),1e3),window.addEventListener("load",(function(){x(),N()})),C.addEventListener("change",(function(e){var t,n=e.target.value;"Month"===n?("css/monthview.css",(t=document.createElement("link")).rel="stylesheet",t.href="css/monthview.css",document.getElementsByTagName("head")[0].appendChild(t),T="Month",W(),B()):"Year"===n&&(function(e){var t=document.querySelector('link[href="'.concat("css/monthview.css",'"]'));console.log(t),t.parentNode.removeChild(t)}(),T="Year"),O(),N()})),p.addEventListener("click",(function(e){e.preventDefault(),A=(new Date).getFullYear(),_=(new Date).getMonth(),O()})),b.addEventListener("click",(function(e){"Year"===T?A--:"Month"===T&&--_<0&&(_=11,A--),O()})),D.addEventListener("click",(function(e){"Year"===T?A++:"Month"===T&&++_>11&&(_=0,A++),O()})),w.addEventListener("click",(function(e){console.log("clicked"),E.classList.remove("active")})),k.addEventListener("click",(function(e){console.log("clicked"),E.classList.toggle("active")})),S.forEach((function(e){e.addEventListener("click",(function(e){e.target.classList.toggle("checked")}))})),L.addEventListener("click",(function(e){var t=document.querySelector("#newitem"),n=t.value;t.value="";var a=document.createElement("div"),o=document.createElement("label"),r=document.createTextNode(n),c=document.createElement("button"),i=document.createElement("i");i.classList.add("fa","fa-trash"),a.classList.add("todo__row"),o.classList.add("todo__label"),c.classList.add("btnDeleteItem"),c.appendChild(i),o.appendChild(r),a.appendChild(o),a.appendChild(c),Y.appendChild(a),c.addEventListener("click",(function(){Y.removeChild(a)})),o.addEventListener("click",(function(e){e.target.classList.toggle("checked")})),t.focus()})),M.addEventListener("click",(function(){document.querySelector(".add-item__countainer").classList.remove("show")})),q.addEventListener("click",(function(e){var t=new s,n=document.querySelector(".todo__container");n.appendChild(t.createNote()),n.lastChild.firstChild.focus()}))})();